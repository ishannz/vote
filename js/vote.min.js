(()=>{const e=(e,t)=>{let o=e.getAttribute("href"),s=e.getAttribute("data-vote"),n=e.getAttribute("data-comment-id"),l=document.forms[0].querySelector('input[name="SecurityID"]').value;fetch(o,{method:"post",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-Requested-With":"XMLHttpRequest"},body:encodeURI(`vote=${s}&comment_id=${n}&SecurityID=${l}`)}).then(e=>{if(e.ok)return e.json()}).then(e=>{((e,t,o,s)=>{let n=e.querySelectorAll(".vote__link"),l=e.querySelector(`.vote__link--${t.toLowerCase()}`),r=e.querySelector(".vote__num--like"),i=e.querySelector(".vote__num--dislike");for(let e=0;e<n.length;e++)n[e].classList.remove("vote__link--selected");l.classList.add("vote__link--selected"),r&&(r.innerHTML=o),i&&(i.innerHTML=s)})(t,e.status,e.numLikes,e.numDislikes)}).then(e=>{t.classList.remove("vote--processing")}).catch(e=>{let o=t.querySelector(".vote__message");o&&(o.style.display=""),t.classList.remove("vote--processing")})};document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelectorAll(".vote");if(0!==t.length)for(let o=0;o<t.length;o++){let s=t[o],n=s.querySelectorAll("[data-vote]");if(0===n.length)return;for(let t=0;t<n.length;t++){n[t].addEventListener("click",t=>{t.preventDefault();let o=t.currentTarget,n=s,l=n.querySelector(".vote__message");if(l&&(l.style.display="none"),n.classList.contains("vote--processing")||o.classList.contains("vote__link--selected"))return!1;n.classList.add("vote--processing"),e(o,n)})}}})})();